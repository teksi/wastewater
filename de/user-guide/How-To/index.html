

<!DOCTYPE html>
<html class="writer-html5" lang="de" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How To &mdash; TWW dev Dokumentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=419ed147"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/translations.js?v=9bf55d28"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="Administratorhandbuch" href="../../admin-guide/index.html" />
    <link rel="prev" title="Verlaufsanzeige (History viewer)" href="../history/history.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            TWW
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" aria-label="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../features-guide/index.html">TEKSI Abwasser (TWW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layerexplanations/index.html">Übersicht über TWW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../digitizing/index.html">Digitalisieren in TWW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editing/index.html">Bearbeiten in TWW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../length-profile/index.html">Längsschnitte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network-following/index.html">Werkzeuge zur Netzwerkverfolgung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plan-plotting/index.html">Plandruck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/index.html">History in TWW</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How To</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-default-values">Standard Werte setzen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-vw-tww-wastewater-structure-labels-work">Wie Beschriftungen in vw_tww_Abwasserbauwerk funktionieren</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-translate-a-label-prefix-c-b-i-o">Wie können die Labelbuchstaben (C, B, I, O) übersetzt werden</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-check-if-triggers-are-active">Wie kann geprüft werden, ob Trigger aktiv sind</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run-symbology-functions-manually">Symbologie-Funktion manuell anstossen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-label-positioning-for-different-scales">Manuelle Beschriftungspositionen für unterschiedliche Massstäbe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-import-existing-label-positions">Importieren von bestehenden Beschriftungspositionen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mike">Erfassen einer Hydr_Geometrie (entspricht einer Beckengeometrie in Mike+)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">Hydraulische Modellierung eines Überlaufes (Streichwehr/Leapingwehr/Förderanlage)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overflow-characteristic">Überlaufcharakteristik</a></li>
<li class="toctree-l3"><a class="reference internal" href="#further-informations">Weitere Infos</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administratorhandbuch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/index.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extensions-guide/index.html">Offizielle TWW-Erweiterungen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tww_swmm/index.html">SWMM Data Exchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation/index.html">Übersetzungen</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TWW</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Guide</a></li>
      <li class="breadcrumb-item active">How To</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user-guide/How-To/index.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div></div></blockquote>
<section id="how-to">
<h1>How To<a class="headerlink" href="#how-to" title="Link to this heading"></a></h1>
<p>Eine Anleitung zu verschiedenen Themen um die Konfiguration von TWW.</p>
<section id="setting-default-values">
<span id="settingdefaultvalues"></span><h2>Standard Werte setzen<a class="headerlink" href="#setting-default-values" title="Link to this heading"></a></h2>
<p>Wenn der folgende Fehler beim Start des TEKSI Projektes erscheint während dem ‚Database production ready check‘:</p>
<div class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>KRITISCH: Fehler fk_provider oder fk_dataowner nicht in tww_od.default_values festgelegt</p>
</div>
<p>dann ist Datenbank noch nicht korrekt einsatzbereit.</p>
<p>Es können Standardwerte für mehrfach genutzte Felder wie FS_Datenlieferant oder FS_Datenherr definiert werden, so dass die Werte nicht bei jedem neuen Datensatz manuell eingefügt werden müssen.</p>
<p>Gehe dazu zur Layergruppe ‚Konfiguration‘ im Projekt:</p>
<figure class="align-default">
<img alt="../../_images/configuration_default_values.png" src="../../_images/configuration_default_values.png" />
</figure>
<ol class="arabic simple">
<li><p>Öffne die Tabelle ‚Standardwerte‘</p></li>
<li><p>In den Bearbeitungsmodus wechseln und Neues Objekt wählen</p></li>
<li><p>Wähle den Feldnamen (im Moment sind FS_Datenherr und FS_Datenlieferant mögliche Werte)</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/default_values_fieldname_selection.png" src="../../_images/default_values_fieldname_selection.png" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Wähle die Organisation, die eingesetzt werden soll (die entsprechende Obj_ID wird in der Tabelle eingesetzt).</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/default_values_organisation_obj_id_selection.png" src="../../_images/default_values_organisation_obj_id_selection.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Wenn noch keine Organisation vorhanden sind, dann müssen diese zuerst importiert werden, siehe ‚Interlis Import‘ Kapitel</p>
</div>
<p>&lt;<a class="reference external" href="https://teksi.github.io/wastewater/admin-guide/interlis-io/index.html#interlis-import">https://teksi.github.io/wastewater/admin-guide/interlis-io/index.html#interlis-import</a>&gt;`_</p>
<p>Betreffend der zweiten Warnung, bitte den TEKSI System Administrator kontaktieren</p>
<div class="admonition warning">
<p class="admonition-title">Warnung</p>
<p>CRITICAL: Error OID prefix set to ‚ch000000‘. Database not safe for production.</p>
</div>
<p>damit der Prefix für das Projekt korrekt gesetzt wird.</p>
<p>Für mehr Informationen vgl. <a class="reference internal" href="../../admin-guide/db-production-readiness/index.html#productionreadiness"><span class="std std-ref">Prepare database for production</span></a></p>
<p>Connect all occurences of your field name to <code class="docutils literal notranslate"><span class="pre">tww_app.get_default_values(field_name)</span></code>.
Per default, the fields <code class="docutils literal notranslate"><span class="pre">fk_provider</span></code> and <code class="docutils literal notranslate"><span class="pre">fk_dataowner</span></code> are already connected to the function <code class="docutils literal notranslate"><span class="pre">tww_app.get_default_values(field_name)</span></code>.</p>
<p>Ein Beispiel für ein SQL Skript, um einen Standardwert in allen Vorkommen eines Feldes einzusetzen, ist <a class="reference external" href="https://github.com/teksi/wastewater/blob/main/datamodel/changelogs/0001/14_default_values.sql">hier</a>)</p>
</section>
<section id="how-vw-tww-wastewater-structure-labels-work">
<h2>Wie Beschriftungen in vw_tww_Abwasserbauwerk funktionieren<a class="headerlink" href="#how-vw-tww-wastewater-structure-labels-work" title="Link to this heading"></a></h2>
<p>Die Beschriftung eines Kontrollschachtes mit den verschiedenen Koten ist eine recht komplexe Sache. Die Koten sind nicht in der Klasse Abwasserbauwerk selbst gespeichert, sondern in den Klassen Deckel und Haltungspunkt der verknüpften Haltungen. TWW hat dafür 4 berechnete Felder um diese Koten beschriften zu können:</p>
<ul class="simple">
<li><p>_cover_label: Zeigt die Kote/n des Feldes Deckel.Kote des Abwasserbauwerks</p></li>
<li><p>_bottom_label: Zeigt die Kote/n des Feldes Abwasserknoten.Sohlenkote des Abwasserbauwerks</p></li>
<li><p>_input_label: zeigt die Koten von Haltungspunkten welche als nach_Haltungspunkte mit einem der Abwasserknoten des Abwasserbauwerks verknüpft sind  (Einläufe)</p></li>
<li><p>_output_label: zeigt die Koten von Haltungspunkten welche als von_Haltungspunkte mit einem der Abwasserknoten des Abwasserbauwerks verknüpft sind (Ausläufe)</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/tww_labels.jpg" src="../../_images/tww_labels.jpg" />
</figure>
<p>In diesem Beispiel gibt es 4 Einläufe beim Schacht, aber es werden nur 2 Einlaufkoten angeschrieben (E1, E2). Warum?</p>
<p>Antwort: In der Datenbank-Funktion, in der die Einlauf_Beschrfitungen berechnet werden, can ein Filter so gesetzt werden, das nur Haltungen mit einer bestimmten Funktion_Hierarchisch (z.B. nur PAA-Haltungen) beschriftet werden (benutzte ein Spezielles Feld in der vl_channel_function_hierarchic, Dokumentation folgt). Im Beispiel sind die 200mm-Haltungen als SAA-Haltungen definiert und deshalb nicht beschriftet.</p>
<p>Welche Haltung ist E1, welche ist E2?</p>
<p>Antwort: TWW benutzt des Azimut des letzten Haltungssegments (Bei Einläufen) resp. des ersten Haltungssegments (bei Ausläufen) um die Reihenfolge der Beschriftungen zu definieren. Wenn man auf dem Haupt-Knoten des Schachtes steht, sich zum Auslauf dreht, dann kommt im Uhrzeigersinn zuerst E1 und später E2. Im Beispiel ist der  Schmutzabwasserkanal 400mm der E1, der Mischabwasserkanal 300mm ist E2.</p>
<div class="admonition hint">
<p class="admonition-title">Hinweis</p>
<p>Diese Nummerierungsmethode war in QGEP noch anders. In QGEP war die Nordrichtung der Startpunkt für die Nummerierung im Urzeigersinn.</p>
</div>
</section>
<section id="how-to-translate-a-label-prefix-c-b-i-o">
<h2>Wie können die Labelbuchstaben (C, B, I, O) übersetzt werden<a class="headerlink" href="#how-to-translate-a-label-prefix-c-b-i-o" title="Link to this heading"></a></h2>
<p>Um die Kurzzeichen in den Beschriftungen zu übersetzen sind im QGIS-Projekt entsprechende Variablen definiert. Um die Buchstaben für Deckel-Koten, Sohlenkoten und Ein- und Auslaufkoten zu ändern, müssen diese Projekt-Einstellungen geändert werden:</p>
<figure class="align-default">
<img alt="../../_images/tww_label_prefix_settings.jpg" src="../../_images/tww_label_prefix_settings.jpg" />
</figure>
<p>Um die Änderungen zu sehen, müssen die Symbology Funktionen manuell gestartet werden (vgl. nächstes Kapitel)</p>
</section>
<section id="how-to-check-if-triggers-are-active">
<h2>Wie kann geprüft werden, ob Trigger aktiv sind<a class="headerlink" href="#how-to-check-if-triggers-are-active" title="Link to this heading"></a></h2>
<p>Während gewissen Prozessen wie der INTERLIS Import werden gewisse Trigger temporär deaktiviert um die Bearbeitungszeit zu verkürzen.</p>
<ul>
<li><p>Prüfe den Status der Triggers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">check_symbology_triggers_enabled</span><span class="p">();</span>
<span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">check_modification_triggers_enabled</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>Aktivieren/Deaktivieren der Trigger:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">alter_symbology_triggers</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">alter_symbology_triggers</span><span class="p">(</span><span class="s1">&#39;disable&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">alter_modification_triggers</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">alter_modification_triggers</span><span class="p">(</span><span class="s1">&#39;disable&#39;</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="how-to-run-symbology-functions-manually">
<h2>Symbologie-Funktion manuell anstossen<a class="headerlink" href="#how-to-run-symbology-functions-manually" title="Link to this heading"></a></h2>
<p>Manchmal werden die berechneten Beschriftungen Deckel-, Einlauf-, Auslauf-, Sohlenkote nicht richtig dargestellt, obwohl sie in der Datenbank entsprechend eingetragen sind.  Das kann vorkommen, wenn zum Beispiel Daten importiert wurden. Oder wenn für das Beschleunigen eines Import’s die Trigger deaktiviert wurden.</p>
<ul>
<li><p>Prüfe den Status der Symbology Trigger:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">check_symbology_triggers_enabled</span><span class="p">();</span>
</pre></div>
</div>
</li>
<li><p>Aktivieren/Deaktivieren der Symbologie-Trigger:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">alter_symbology_triggers</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">alter_symbology_triggers</span><span class="p">(</span><span class="s1">&#39;disable&#39;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Starte <strong>label function</strong> für alle Daten (_label, _cover_label, _bottom_label, _input_label und_output_label):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">update_wastewater_structure_label</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<figure class="align-default">
<img alt="../../_images/tww_label_attributes.jpg" src="../../_images/tww_label_attributes.jpg" />
</figure>
<ul>
<li><p>Starte die Berechnung der Schacht-Tiefe für alle Daten (wastewater_structure._depth):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">update_depth</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
<figure class="align-default">
<img alt="../../_images/tww_system_attributes_depth.jpg" src="../../_images/tww_system_attributes_depth.jpg" />
</figure>
<p>Für die Symbolisierung von Schächten und Abwasserknoten mit _function_hierarchic und _usage_current berechnet <cite>update_wastewater_node_symbology</cite>  die TWW-Attribute mit den verknüpften Haltungen.</p>
<ul>
<li><p>Starte <a href="#id1"><span class="problematic" id="id2">**</span></a>Abwasserknoten Symbologie“ für alle Datensätze (berechnet Funktion_Hierarchisch und Nutzungsart_Ist aus den verknüpften Haltungen und berechnet damit die Felder wastewater_node._function_hierarchic und_usage_current):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">tww_app</span><span class="o">.</span><span class="n">update_wastewater_node_symbology</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="manual-label-positioning-for-different-scales">
<h2>Manuelle Beschriftungspositionen für unterschiedliche Massstäbe<a class="headerlink" href="#manual-label-positioning-for-different-scales" title="Link to this heading"></a></h2>
<p>In QGIS können verschiedene Beschriftungsdefinitionen für verschiedene Massstäbe definiert werden. Bei der Arbeit am Bildschirm funktioniert das gut. Aber soll ein Plan mit Beschriftung gedruckt oder ein Datenexport der Beschriftungen (z.B. für ins Regio-GIS) gemacht werden, ist es oft nötig, die Beschriftungspositionen manuell zu definieren. Wenn eine Beschriftung manuell platziert wird in QGIS, dann gilt diese fixe Position aber für jeden Massstab. Und das führt nicht immer zu guten Resultaten.</p>
<p>Lösung</p>
<ul class="simple">
<li><p>Erweitern der Hilfsspeichertabellen (Auxiliary Storage) mit neuen Feldern für verschiedene Beschriftungspositionen</p></li>
<li><p>Regelbasierte Beschriftungen verwenden, dann kann für jede Regel eine unterschiedliche Beschriftungsposition definiert werden</p></li>
</ul>
<p>Im untenstehenden Beispiel soll für die Abwasserbauwerke je eine Beschriftung für den Werkplan (1:500) und für den Übersichtsplan (1:2000) erstellt werden. In den Hilfsspeichertabellen benutzen wir die Standardfelder PositionX und PositionY für die Werkplan-Beschriftung. Für die Übersichtsplan-Beschriftung braucht es zwei neue Felder. Wir benennen sie posx2000 und posy2000.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_newfields.jpg" src="../../_images/man_labeling_newfields.jpg" />
</figure>
<p>Jetzt definieren wir zwei regelbasierte Beschriftungen. Im Beispiel heisst die erste Regel WP-Labels (WP=Werkplan). Bei der Platzierung muss nichts geändert werden, weil für die Regel die Standard Positionsfelder verwendet werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_rules.jpg" src="../../_images/man_labeling_rules.jpg" />
</figure>
<p>Die zweite Regel nennen wir UP-Labels (UP=Uebersichtsplan). In dieser Regel müssen die Koordinaten-Felder im Reiter Platzierung geändert werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_edit_rules.jpg" src="../../_images/man_labeling_edit_rules.jpg" />
</figure>
<figure class="align-default">
<img alt="../../_images/man_labeling_coordinatefield.jpg" src="../../_images/man_labeling_coordinatefield.jpg" />
</figure>
<p>Klicke auf das Koordinate X - Menütool und wähle im Feldtype-Menü das Feld auxiliary_storage_user_custom_posx2000. Dann analog das gleiche für die Y Koordinate.</p>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Für die Definition des Koordinaten-Feldes darf nicht das <strong>Bearbeiten…</strong> Menü verwendet werden. Wenn der Formel-Editor verwendet wird oder das Feld mit dem Bearbeiten…-Menü bestimmt wird, wird QGIS die Auswahl jedesmal überschreiben, wenn eine manuelle Positionierung verwendet wird.</p>
</div>
<p>Jetzt können mit dem QGIS Tool <strong>Verschiebt Beschriftung oder Diagramm</strong> die Beschriftungen für jede Regel unterschiedlich positioniert werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_labeltools.jpg" src="../../_images/man_labeling_labeltools.jpg" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Die Änderungen werden nur gespeichert, wenn das QGIS-Projekt gespeichert wird!</p>
</div>
</section>
<section id="how-to-import-existing-label-positions">
<h2>Importieren von bestehenden Beschriftungspositionen<a class="headerlink" href="#how-to-import-existing-label-positions" title="Link to this heading"></a></h2>
<p>In guten Beschriftungspositionen kann viel Arbeit stecken. Diese Arbeit soll nicht verloren gehen.</p>
<ul class="simple">
<li><p>Exportieren der Beschriftungsposition im alten GIS in der Form Obj_ID, KoordinateX(Ost), KoordinateY(Nord).</p></li>
<li><p>Füge das**.qgd**-File vom aktuellen Projekt mit <strong>Vektorlayer hinzufügen…</strong> im Projekt ein und öffne die Attributtabelle.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/man_labeling_auxtable.jpg" src="../../_images/man_labeling_auxtable.jpg" />
</figure>
<p>Wenn noch kein .qgd-File vorhanden ist, dann wurde vermutlich noch nie in diesem Projekt eine Beschriftung manuell verschoben oder gedreht.</p>
<ul class="simple">
<li><p>Ändere die Feldnamen in der Exportdatei in die Feldnamen aus der .qgd-Datei. Im Beispiel muss dass Obj_ID-Feld den Namen <strong>ASPK</strong> haben, die Koordinaten-Felder müssen <strong>labeling_positionx</strong> und <strong>labeling_positiony</strong> heissen.</p></li>
<li><p>Öffne das Export-File im QGIS-Projekt und kopiere die gewünschten Zeilen in die Tabelle der qgd-Datei (diese Tabelle muss editierbar sein).</p></li>
<li><p>Speichere das qgd-File und lösche es aus dem Projekt, bevor Beschriftungen verschoben werden, weil QGIS nicht manuelle Beschriftungs-Positionen sichern kann, solange das qgd-File als Layer im Projekt geöffnet ist.</p></li>
<li><p>Falls notwendig definiere die Ausrichtung horizontal und vertikal der Beschriftungen im Platzierungs-Reiter der Beschriftungsdefinition.</p></li>
</ul>
</section>
<section id="collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mike">
<h2>Erfassen einer Hydr_Geometrie (entspricht einer Beckengeometrie in Mike+)<a class="headerlink" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mike" title="Link to this heading"></a></h2>
<p>Hinweis:</p>
<ul class="simple">
<li><p>Schächte mit einer Hydr_Geometrie sind als Spezialbauwerke (und nicht als Normschächte) zu erfassen.</p></li>
<li><p>Die Schachtgeometrie kann graphisch mit <strong>Aktion Digitize</strong> gezeichnet werden.</p></li>
</ul>
<p>Vorgehen:</p>
<ol class="arabic simple">
<li><p>Im Layer vw_tww_Abwasserbauwerk das Abwasserbauwerk mit dem i-Knopf auswählen</p></li>
<li><p>Im Fenster Objektattribute den Reiter <strong>Abwasserknoten</strong> wählen</p></li>
</ol>
<p>oder direkter: Wähle den Knoten mit dem i-Knopf im Layer vw_Abwasserknoten</p>
<ol class="arabic simple" start="3">
<li><p>Erweitere den Teil <strong>zusätzliche Attribute in Spezialbauwerken</strong></p></li>
<li><p>Wählen eine Hydr_Geometrie(Beckengeometrie) im Feld fs_Hydr_Geometrie oder erstelle mit dem + Knopf eine neue Hydr_Geometrie .</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry1.jpg" src="../../_images/hydr_geometry1.jpg" />
</figure>
<ol class="arabic simple" start="5">
<li><p>Bei einem neuen Datensatz: Im Fenster Hydr-Geometrie – Objektattribute eine Bezeichnung erfassen. Diese Bezeichnung ist auch die Bezeichnung der Tabelle in Mike+.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry2.jpg" src="../../_images/hydr_geometry2.jpg" />
</figure>
<ol class="arabic simple" start="6">
<li><p>Mit dem <strong>Kindobjekt hinzufügen</strong> Knopf können nun die Datensätze erzeugt werden, mit denen die Beckengeometrie analog der Beckengeometrie von Mike+ (H, As Oberfläche, Ac Querschnittsfläche) definiert wird.</p></li>
</ol>
<p>In der Tabellendarstellung ist der Überblick über die Werte einfacher.</p>
<figure class="align-default">
<img alt="../../_images/hydr_geometry3.jpg" src="../../_images/hydr_geometry3.jpg" />
</figure>
<p>Hinweis:</p>
<ul class="simple">
<li><p>Als Wassertiefe ist der Werte über der Sohlenkote resp. dem Auslauf anzugeben. Eine Beckengeometrie kann so bei gleichen Schächten für mehrere Schächte verwendet werden.</p></li>
<li><p>Beachte die Regeln, die in Mike gelten (z.B. muss die Querschnittsfläche kontinuierlich wachsen)</p></li>
<li><p>Solange der Hydr_Geometrie Datensatz nicht gespeichert ist wird im Objektattribute Fenster nur die Obj_ID in Klammern dargestellt. Erst nach dem Sichern wird die erfasste Bezeichnung sichtbar.</p></li>
</ul>
</section>
<section id="hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">
<h2>Hydraulische Modellierung eines Überlaufes (Streichwehr/Leapingwehr/Förderanlage)<a class="headerlink" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump" title="Link to this heading"></a></h2>
<p>Es gibt ein spezielle View für Überläufe, auch wenn möglich wäre, die Überlauf-Daten im Layer vw_tww_Abwasserbauwerk zu erfassen. Der Vorteil des Layer <a href="#id3"><span class="problematic" id="id4">vw_tww_Ueberlauf_</span></a> Überläufe können visualisiert und einfach gesucht werden und sind als Listen verfügbar.</p>
<p>Vorgehen:</p>
<p>Falls er noch nicht existiert: Bei Wehren ist ein zweiter Abwasserknoten im Bauwerk zu erstellen. Ein zweiter Auslauf ist bereits erstellt (grün = entlastetes Mischabwasser) und ist aber beim Überlaufbauwerk noch mit keinem Abwasserknoten verknüpft.</p>
<ol class="arabic simple">
<li><p>Abwasserbauwerk mit i-Knopf auswählen</p></li>
<li><p>Im Fenster Objektattribute den Reiter Abwasserknoten wählen</p></li>
<li><p>Mit dem <strong>Punktkindobjekt hinzufügen</strong> Knopf kann ein zweiter Abwasserknoten erzeugt werden. Der hellblaue Hinweis oben in der Karte sagt, was zu tun ist!</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow1.jpg" src="../../_images/overflow1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Mit Klick beim Auslauf 2 wird der zweite Abwasserknoten platziert.</p></li>
<li><p>Es erscheint das Eingabefenster für diesen Abwasserknoten. Es ist eine sinnvolle Bezeichnung zu wählen (zB. 1.070-AK2 für Abwasserknoten 2 des Schachtes 1.070). Diese Bezeichnung erscheint auch in Mike+. Mit OK wird der neue Abwasserknoten gespeichert.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow2.jpg" src="../../_images/overflow2.jpg" />
</figure>
<p>Schliesse das Objekt Attribute Fenster des Abwasserbauwerks.</p>
<p>Um ein neues Streichwehr zu definieren:</p>
<ol class="arabic simple" start="6">
<li><p>Wähle den Layer vw_tww_Ueberlauf in der Layergruppe Hydraulik.</p></li>
<li><p>Wähle den QGIS Standard <strong>Punktobjekt hinzufügen</strong> Knopf und klicke irgendwo in der Nähe des Abwasserbauwerks</p></li>
</ol>
<div class="admonition hint">
<p class="admonition-title">Hinweis</p>
<p>Weil der Überlauf selbst keine Geometrie besitzt, spielt die Stelle, wo geklickt wird, keine Rolle. Die Geometrie wird definiert mit den verknüpften von- und nach-Abwasserknoten, siehe Punkt 9</p>
</div>
<p>Das Überlauf Objekt Attribut Fenster öffnet.</p>
<ol class="arabic simple" start="8">
<li><p>Tippe die Bezeichnung und wähle den Überlauf_Type.</p></li>
<li><p>Definier die beiden Abwasserknoten des Überlaufs (FS_Abwasserknoten = von Knoten, FS_Ueberlauf_nach = nach Knoten) durch Auswählen auf der Karte mit dem <a href="#id1"><span class="problematic" id="id2">**</span></a>Auf der Karte auswählen**Werkzeug.</p></li>
</ol>
<p>Die Attribute im oberen Teil des Hydraulik Abschnitts sollten ausgefüllt werden, sie werden dann auch zu Mike+ überspielt.</p>
<figure class="align-default">
<img alt="../../_images/overflow4.jpg" src="../../_images/overflow4.jpg" />
</figure>
<p>Alle offenen Objektattribute-Fenster schliessen.</p>
<div class="admonition hint">
<p class="admonition-title">Hinweis</p>
<p>Der neue Überlauf wird mit gepunkteter Linie mit einem Richtungspfeil dargestellt. Falls die Linie nicht erscheint: Die Linie ist als QGIS Geometrie Generator Symbol definiert. Kontrolliere die Formel im Geometrie Generator (Layer Eigenschaften/Symbole, wähle das Symbol), kontrolliere zuerst den Namen vom <strong>vw_wastewater_node</strong> Layer. Wenn dieser Layer umbenannt wurde (übersetzt), dann muss auch die Formel entsprechend angepasst werden (z.B. auf <strong>vw_Abwasserknoten</strong>).</p>
</div>
<p>Zum Schluss muss der zweite Auslauf mit dem zweiten Abwasserknoten verknüpft werden:</p>
<ol class="arabic simple">
<li><p>Das TWW-Werkzeug <strong>Connect wastewater networkelements</strong> wählen.</p></li>
<li><p>Klick auf der Haltung beim Auslauf</p></li>
<li><p>Klick auf dem Abwasserknoten</p></li>
<li><p>Bestätigen, dass die Verknüpfung für den <strong>von Haltungspunkt</strong> erstellt wird</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/connect_2_node.jpg" src="../../_images/connect_2_node.jpg" />
</figure>
</section>
<section id="overflow-characteristic">
<h2>Überlaufcharakteristik<a class="headerlink" href="#overflow-characteristic" title="Link to this heading"></a></h2>
<p>Bei einem Leaping-Wehr, einem Förderaggregat oder bei speziellen Verhältnissen kann bei einem Überlauf eine Überlaufcharakteristik definiert werden:</p>
<p>Es kann eine bereits vorhandene Charakteristik im Feld FS_Ueberlauf_Char gewählt werden oder mit dem grünen + Knopf eine neue Charakteristik erstellt werden .</p>
<p>Es erscheint das Objektattribute Fenster für die Ueberlaufcharakteristik:</p>
<figure class="align-default">
<img alt="../../_images/overflow_char1.jpg" src="../../_images/overflow_char1.jpg" />
</figure>
<ol class="arabic simple">
<li><p>Auch hier wird die Bezeichnung später in Mike+ übernommen als Tabellenbezeichnung für eine QH-Beziehung, welche z.B. in einer lokalen Steuerung benutzt wird.</p></li>
<li><p>Definiere die notwendigen HQ oder QQ Werte mit dem <strong>Kindobjekt hinzufügen</strong> Knopf. Es muss der richtige Tab entsprechend der Wahl im Feld <strong>Kennlinie_Typ</strong> gewählt werden.</p></li>
</ol>
</section>
<section id="further-informations">
<h2>Weitere Infos<a class="headerlink" href="#further-informations" title="Link to this heading"></a></h2>
<p>Weiter Q &amp; A’s gibt es hier: <a class="reference external" href="https://github.com/orgs/teksi/discussions/categories/q-a">TWW Discussion section</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../history/history.html" class="btn btn-neutral float-left" title="Verlaufsanzeige (History viewer)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
        <a href="../../admin-guide/index.html" class="btn btn-neutral float-right" title="Administratorhandbuch" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The TWW Project www.teksi.ch.</p>
  </div>

  Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>